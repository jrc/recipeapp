<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Recipe App</title>
        <link rel="stylesheet" href="base.css" />
        <link rel="stylesheet" href="style.css" />
    </head>

    <body>
        <main>
            <div class="tab-container">
                <div class="tab-buttons">
                    <button class="tab-button active" data-tab="import">
                        Import
                    </button>
                    <button class="tab-button" data-tab="edit">Edit</button>
                    <button class="tab-button" data-tab="view">View</button>
                </div>
                <div class="tab-content active" id="import">
                    <form id="import-form">
                        <input type="url" placeholder="Enter a recipe URL" />
                        <button type="submit">Import</button>
                    </form>
                    <div class="feature-section">
                        <div class="feature-item">
                            <h4>Import &amp; Edit Recipes</h4>
                            <p>
                                Easily bring in recipes from the web and edit
                                them in plain-text Markdown format, letting you
                                customize recipes before or after cooking.
                            </p>
                        </div>
                        <div class="feature-item">
                            <h4>Optimized Cooking View</h4>
                            <p>
                                See your recipe formatted with a clean,
                                easy-to-read layout, visually prominent
                                ingredients (English only), strikeable list
                                items, duration timers, and a screen that stays
                                awake.
                            </p>
                        </div>
                        <div class="feature-item">
                            <h4>Smart Metric Conversion</h4>
                            <p>
                                Measurements in American recipes are
                                automatically annotated with metric conversions,
                                using intelligently chosen units and rounded
                                numbers.
                            </p>
                        </div>
                    </div>
                </div>
                <div class="tab-content" id="edit">
                    <textarea rows="25">
# Filter Coffee

![Recipe Image](https://upload.wikimedia.org/wikipedia/commons/thumb/4/4d/Caf%C3%A9_coado.jpg/330px-Caf%C3%A9_coado.jpg)

A classic way to brew a clean and flavorful cup of coffee.

**Prep Time:** 2 minutes
**Cook Time:** 5 minutes
**Servings:** 1 cup

---

## Ingredients
* 0.5 oz ground coffee
* 1 cup filtered water

## Instructions
1.  Rinse filter and preheat dripper.
2.  Add coffee grounds.
3.  Heat water to 195-205°F.
4.  Pour 1.35 fl oz water over grounds. Bloom for 30–45 seconds.
5.  Slowly pour remaining water, aiming for 2 minutes.
6.  Let all water drip through. This takes 1–2 minutes.
7.  Enjoy your coffee!
                    </textarea>
                    <details id="ai-assistance-details" style="margin-top: 1em">
                        <summary>✨ AI Assistance</summary>
                        <div class="llm-tool-section" style="padding-top: 10px">
                            <div style="margin-bottom: 10px">
                                <label for="llm-prompt">Prompt:</label>
                                <input
                                    type="text"
                                    id="llm-prompt"
                                    name="llm-prompt"
                                    placeholder='e.g. "Make this vegan-friendly", "more spicy"'
                                    style="
                                        width: 100%;
                                        box-sizing: border-box;
                                        margin-top: 5px;
                                    "
                                />
                            </div>
                            <button type="button" id="llm-submit-button">
                                Submit
                            </button>
                        </div>
                    </details>
                    <details id="settings-details" style="margin-top: 1em">
                        <summary>Settings</summary>
                        <div class="llm-tool-section" style="padding-top: 10px">
                            <div style="margin-bottom: 10px">
                                <label for="llm-api-key">Gemini API Key:</label>
                                <input
                                    type="text"
                                    id="gemini-api-key"
                                    name="gemini-api-key"
                                    placeholder="Enter your Gemini API key"
                                    style="font-family: monospace"
                                    size="40"
                                />
                                <small
                                    >(<a
                                        href="https://aistudio.google.com/app/apikey"
                                        >need an API key?</a
                                    >)</small
                                >
                            </div>
                        </div>
                    </details>
                    <script>
                        document.addEventListener("DOMContentLoaded", () => {
                            const apiKeyInput =
                                document.getElementById("gemini-api-key");
                            const aiAssistanceDetails = document.getElementById(
                                "ai-assistance-details",
                            );
                            const promptInput =
                                document.getElementById("llm-prompt");
                            const submitButton =
                                document.getElementById("llm-submit-button");

                            const updateAIState = () => {
                                const apiKey = apiKeyInput.value.trim();
                                const isEnabled = apiKey !== "";

                                promptInput.disabled = !isEnabled;
                                submitButton.disabled = !isEnabled;

                                // Add a visual cue to the details summary/content when disabled
                                aiAssistanceDetails.style.opacity = isEnabled
                                    ? ""
                                    : "0.6";
                            };

                            // Initial state update
                            updateAIState();

                            // Update state when API key changes
                            apiKeyInput.addEventListener(
                                "input",
                                updateAIState,
                            );

                            // Auto-open AI Assistance if key is present on load
                            if (apiKeyInput.value.trim() !== "") {
                                aiAssistanceDetails.open = true;
                            }
                        });
                    </script>
                </div>
                <div class="tab-content" id="view">
                    <div id="renderedRecipeView">
                        <p>Rendered recipe will appear here.</p>
                    </div>
                </div>
            </div>
        </main>

        <script src="main.js"></script>
    </body>
</html>
